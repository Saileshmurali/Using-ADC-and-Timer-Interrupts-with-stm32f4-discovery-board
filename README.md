# Using-ADC-and-Timer-Interrupts-with-stm32f4-discovery-board
The timer has been configured to generate interrupt for every second. The timer 2 clock corresponds to APB1 timer clock, which can be obtained from the data sheet. Using CubeMX, the APB1 timer clock has been configured to 16MHz. The clock is then prescaled by a factor of 16000 which brings down the frequency to 1KHz. So, every count of the timer corresponds to 1ms. The timer autoreload has then been configured as 1000. So, 1000 counts with each count taking 1ms comes down to 1 second gap. User can also change the interval of timer interrupt by changing the prescaling value and the autoreload value. This can be done under the MX_TIM2_Init() function.
Configuring ADC:
The ADC has been configured in continuous conversion mode. 8 bit ADC has been used. The user can modify it by making apporopriate changes under MX_ADC1_Init() in hadc1.Init.Resolution. ADC 1 has been used and PA0 has been used for the input for ADC. Clock for ADC 1 corresponds to APB2 peripheral clocks. APB2 peripheral clock has been set to 16MHz. This is then prescaled by 4 and reducing it to 4MHz. This can be changed by varying the hadc1.Init.ClockPrescaler. ADC sampling time has been set to 480 cycles along with 11 cycles for the 8 bit conversion. So, the sampling interval can be calculated by (480+11)/4MHz, which approximately gives a sampling rate of 8000Hz. By changing the prescaler value and sampling cycles, sampling rate can be controlled as needed.
